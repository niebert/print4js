<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demo 2: Print Code</title>
     <!-- Main CSS -->
     <link href="css/main.css" rel="stylesheet">
     <link rel="stylesheet" href="css/highlight_css/xcode.css">
     <script src="js/highlight.pack.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>
     <script>
        //-----------------------------------------------
        function get_source(pID) {
          var vSource = "Undefined source in node '" + pID + "'";
          var vNode = document.getElementById(pID);
          if (vNode) {
            vSource = vNode.innerHTML;
          } else {
            console.error("DOM node with ID='" + pID + "' undefined!");
          };
          return vSource
        }

        function escape_html(pHTML) {
          pHTML = pHTML.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
          return pHTML
        }

        function printTextArea(pID) {
          console.log("Print HTML content in DIV element with the ID='" + pID + "'");
          var print_win = window.open("","wPrintWin","width=300,height=300,scrollbars=1,resizable=1");
          var html = get_source(pID);

          // Open a print window print_win
          print_win.document.open();
          print_win.document.write(html);
          print_win.document.close();
          print_win.focus();
          print_win.print();
          print_win.close();
        }

        function previewTextArea(pID) {
          console.log("Preview HTML content in DIV element with the ID='" + pID + "'");
          var preview_win = window.open("","wPreviewtWin","width=600,height=400,toolbar=yes,location=yes,status=yes,menubar=yes,scrollbars=yes,resizable=yes");
          var html = get_source(pID);

          // Open a print window print_win
          preview_win.document.open();
          preview_win.document.write(html);
          preview_win.document.close();
          preview_win.focus();
        }

    </script>
  </head>
  <body>
    <h2>Print4JS - Demo 2: Print Code</a> </h2>
    This WebApp Demo is an <a href="https://en.wikiversity.org/wiki/AppLSAC/Print" target="_blank">AppLSAC</a> showing one example of print features of WebApps.
  <hr>
    <h4>HTML Code</h4>

    <button onclick="previewTextArea('html4printing');return false">Preview Print Window</button>
    <button onclick="printTextArea('html4printing');return false">Print HTML</button><br>
    HTML in the following <tt>pre-code</tt> tags needs escaping of characters with the function <tt>escape_html()</tt>, otherwise the content will be interpreted by the browser.
    <div id="html4printing">
      <pre><code class="html" id="codehtml"><hr>
<h1>Print4JS Demo: Highlight Syntax of Code</h1>
Hello World for HTML Code
<hr></code>
      </pre>
    </div>
    <hr>
    <h4>Javascript Code</h4>
    <button onclick="previewTextArea('js4printing');return false">Preview Print Window</button>
    <button onclick="printTextArea('js4printing');return false">Print Javascript</button><br>
    <div id="js4printing">
      <pre><code class="javascript">var test=0.5;
if (test > 0) {
  alert("Value greater zero")
}</code></pre>
    </div>
    <center>
      <b>
        <a href="index.html">&lt;&lt; Demo Applications with Print4JS</a>
      </b>
    </center>

    <script type="text/javascript">
      var code_dom = document.getElementById('codehtml');
      if (code_dom) {
        code_dom.innerHTML = escape_html(code_dom.innerHTML);
      }
    </script>
  </body>
</html>
